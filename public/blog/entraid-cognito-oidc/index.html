<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    

<meta property="og:url" content="http://localhost:1313/blog/entraid-cognito-oidc/">
  <meta property="og:site_name" content="Nobuhiro Tokushige - AI & Cloud Solutions">
  <meta property="og:title" content="Entra ID and Cognito - OIDC">
  <meta property="og:description" content="Overview This guide walks through setting up Microsoft Entra ID (formerly Azure AD) as an OpenID Connect (OIDC) identity provider for AWS Cognito User Pools. This integration allows users to sign in to your applications using their Microsoft credentials.
Steps 1. Sign in to Azure Portal Navigate to https://portal.azure.com and access Microsoft Entra ID (formerly “Azure AD”) from the main services menu.
2. Register a New Application In Microsoft Entra ID, select App registrations → New registration.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-08-11T08:26:23+10:00">
    <meta property="article:modified_time" content="2025-08-11T08:26:23+10:00">
    <meta property="article:tag" content="Azure AD">
    <meta property="article:tag" content="Microsoft Entra ID">
    <meta property="article:tag" content="Amazon Cognito User Pool">
    <meta property="article:tag" content="Federation Authentication">
    <meta property="article:tag" content="OIDC">


<meta name="description" content="AI consultant and cloud solutions architect sharing practical insights on AWS, generative AI, and modern DevOps practices. Building the future of AI-powered applications." />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Nobuhiro Tokushige - AI &amp; Cloud Solutions</title>
    
  
<link rel="icon" type="image/png" href="/images/favicon.png" />
<link href="https://fonts.googleapis.com/css?family=Open&#43;Sans:400,600" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<link rel="stylesheet" type="text/css" href="/css/icons.css">

<link rel="stylesheet" href="http://localhost:1313/custom.css">

  </head>
  <body>
    
    
    <div id="preloader">
      <div id="status"></div>
    </div>
    

    

<nav class="navbar is-fresh is-transparent no-shadow" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logos/IntelliumX-v16.png" alt="" width="112" height="28">
      </a>
      <a class="navbar-item is-hidden-desktop is-hidden-tablet">
        <div id="menu-icon-wrapper" class="menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbar-menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

      <div id="navbar-menu" class="navbar-menu is-static">
        <div class="navbar-start">
          <a class="navbar-item is-hidden-mobile">
            <div id="menu-icon-wrapper" class="menu-icon-wrapper" style="visibility: visible;">
              <svg width="1000px" height="1000px">
                <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
                <path class="path2" d="M 300 500 L 700 500"></path>
                <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
              </svg>
              <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
            </div>
          </a>
        </div>

        <div class="navbar-end">
          <a href="/" class="navbar-item is-secondary">
            Home
          </a>
          <a href="/projects/" class="navbar-item is-secondary">
            Projects
          </a>
          <a href="/blog/" class="navbar-item is-secondary">
            Blog
          </a>
          <a href="/about/" class="navbar-item is-secondary">
            About
          </a>
        </div>
      </div>
  </div>
</nav>


<nav id="navbar-clone" class="navbar is-fresh is-transparent" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <img src="/images/logos/IntelliumX-v16.png" alt="" width="112" height="28">
      </a>
      <a class="navbar-item is-hidden-desktop is-hidden-tablet">
        <div id="menu-icon-wrapper" class="menu-icon-wrapper" style="visibility: visible;">
          <svg width="1000px" height="1000px">
            <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
            <path class="path2" d="M 300 500 L 700 500"></path>
            <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
          </svg>
          <button id="menu-icon-trigger" class="menu-icon-trigger"></button>
        </div>
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="cloned-navbar-menu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="cloned-navbar-menu" class="navbar-menu is-fixed">
      <div class="navbar-start">
        <a class="navbar-item is-hidden-mobile">
          <div id="cloned-menu-icon-wrapper" class="menu-icon-wrapper" style="visibility: visible;">
            <svg width="1000px" height="1000px">
              <path class="path1" d="M 300 400 L 700 400 C 900 400 900 750 600 850 A 400 400 0 0 1 200 200 L 800 800"></path>
              <path class="path2" d="M 300 500 L 700 500"></path>
              <path class="path3" d="M 700 600 L 300 600 C 100 600 100 200 400 150 A 400 380 0 1 1 200 800 L 800 200"></path>
            </svg>
            <button id="cloned-menu-icon-trigger" class="menu-icon-trigger"></button>
          </div>
        </a>
      </div>

      <div class="navbar-end">
        <a href="/" class="navbar-item is-secondary">
          Home
        </a>
        <a href="/projects/" class="navbar-item is-secondary">
          Projects
        </a>
        <a href="/blog/" class="navbar-item is-secondary">
          Blog
        </a>
        <a href="/about/" class="navbar-item is-secondary">
          About
        </a>
      </div>
    </div>
</div>
</nav>


<section class="section is-small">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <h1 class="title is-2">Entra ID and Cognito - OIDC</h1>
        <p class="subtitle is-6">August 11, 2025</p>
        <div class="content"><h2 id="overview">Overview</h2>
<p>This guide walks through setting up Microsoft Entra ID (formerly Azure AD) as an OpenID Connect (OIDC) identity provider for AWS Cognito User Pools. This integration allows users to sign in to your applications using their Microsoft credentials.</p>
<h2 id="steps"><strong>Steps</strong></h2>
<h3 id="1-sign-in-to-azure-portal"><strong>1. Sign in to Azure Portal</strong></h3>
<p>Navigate to <a href="https://portal.azure.com">https://portal.azure.com</a> and access <strong>Microsoft Entra ID</strong> (formerly &ldquo;Azure AD&rdquo;) from the main services menu.</p>
<h3 id="2-register-a-new-application"><strong>2. Register a New Application</strong></h3>
<ol>
<li>In <strong>Microsoft Entra ID</strong>, select <strong>App registrations</strong> → <strong>New registration</strong>.</li>
</ol>
<p><img src="2025-08-11-08-30-37.png" alt=""></p>
<ol>
<li>
<p>Configure the following settings:</p>
<ul>
<li>
<p><strong>Name:</strong> Choose a descriptive name like <code>CognitoOIDC</code></p>
</li>
<li>
<p><strong>Supported account types:</strong> Select based on your requirements:</p>
<ul>
<li>For internal use: <em>Accounts in this organizational directory only</em></li>
<li>For broader access: <em>Accounts in any organisational directory and personal Microsoft accounts</em></li>
</ul>
</li>
<li>
<p><strong>Redirect URI:</strong></p>
<ul>
<li>Platform: <strong>Web</strong></li>
<li>URI: <code>https://&lt;your-cognito-domain&gt;/oauth2/idpresponse</code></li>
</ul>
<p>Example: <code>https://myapp.auth.ap-southeast-2.amazoncognito.com/oauth2/idpresponse</code></p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Register</strong> to create the application.</p>
</li>
</ol>
<p><img src="2025-08-11-08-32-00.png" alt=""></p>
<h3 id="3-collect-oidc-metadata"><strong>3. Collect OIDC Metadata</strong></h3>
<p>After registration, from your new app&rsquo;s <strong>Overview</strong> page, note these important values:</p>
<ul>
<li><strong>Application (client) ID</strong> - This becomes your <code>client_id</code> for Cognito</li>
<li><strong>Directory (tenant) ID</strong> - Required for constructing the issuer URL</li>
<li><strong>OIDC Metadata URL:</strong> <code>https://login.microsoftonline.com/&amp;lt;tenant-id&amp;gt;/v2.0/.well-known/openid-configuration</code></li>
</ul>
<p><img src="2025-08-11-08-46-53.png" alt=""></p>
<h3 id="4-create-a-client-secret"><strong>4. Create a Client Secret</strong></h3>
<ol>
<li>Navigate to <strong>Certificates &amp; secrets</strong> → <strong>New client secret</strong></li>
<li>Add a meaningful description and select an appropriate expiration period</li>
<li>Click <strong>Add</strong> and immediately copy the generated <strong>Value</strong> - this is your <code>client_secret</code></li>
</ol>
<p><img src="2025-08-11-08-48-25.png" alt=""></p>
<h3 id="5-configure-token-generation"><strong>5. Configure Token Generation</strong></h3>
<ol>
<li>In your user pool, go to <strong>App integration</strong> → <strong>Hosted UI</strong></li>
<li>Under <strong>ID token</strong>, enable the attributes (email, family_name, given_name)</li>
<li>Click <strong>Save changes</strong></li>
</ol>
<p><img src="2025-08-11-08-33-43.png" alt=""></p>
<h3 id="6-configure-api-permissions"><strong>6. Configure API Permissions</strong></h3>
<p>To ensure proper user attribute access:</p>
<ol>
<li>Go to <strong>API permissions</strong> → <strong>Add a permission</strong> → <strong>Microsoft Graph</strong></li>
<li>Add these permissions (email, family_name, given_name)</li>
<li>Click <strong>Add permissions</strong> and then <strong>Grant admin consent</strong></li>
</ol>
<p><img src="2025-08-11-08-34-17.png" alt=""></p>
<h3 id="7-add-oidc-provider-in-cognito"><strong>7. Add OIDC Provider in Cognito</strong></h3>
<p>In the AWS Console:</p>
<ol>
<li>Navigate to <strong>Cognito</strong> → <strong>User Pools</strong> → select your user pool</li>
<li>Go to <strong>Identity providers</strong> → <strong>Add identity provider</strong> → <strong>OpenID Connect</strong></li>
</ol>
<p><img src="2025-08-11-08-35-13.png" alt=""></p>
<ol>
<li>Configure the provider:
<ul>
<li><strong>Provider name:</strong> <code>entra</code> (use a simple name without spaces)</li>
<li><strong>Client ID:</strong> Paste the Application (client) ID from Entra ID</li>
<li><strong>Client secret:</strong> Paste the secret value you created earlier</li>
<li><strong>Authorize scopes:</strong> <code>openid profile email</code></li>
<li><strong>Attributes request method:</strong> Select <code>POST</code> (recommended)</li>
<li><strong>Issuer URL:</strong> <code>https://login.microsoftonline.com/&lt;tenant-id&gt;/v2.0</code></li>
</ul>
</li>
</ol>
<p><img src="2025-08-11-08-36-04.png" alt=""></p>
<p><img src="2025-08-11-08-36-21.png" alt=""></p>
<h3 id="8-configure-attribute-mapping"><strong>8. Configure Attribute Mapping</strong></h3>
<p>In the same identity provider settings:</p>
<ol>
<li>Under <strong>Attribute mapping</strong>, map these important attributes:
<ul>
<li><strong>email</strong> → <code>email</code></li>
<li><strong>family_name</strong> → <code>family_name</code></li>
<li><strong>given_name</strong> → <code>given_name</code></li>
</ul>
</li>
<li>Click <strong>Save changes</strong></li>
</ol>
<p><img src="2025-08-11-08-36-46.png" alt=""></p>
<h3 id="9-enable-provider-for-your-app-client"><strong>9. Enable Provider for Your App Client</strong></h3>
<ol>
<li>Go to <strong>App integration</strong> → <strong>App clients</strong> → select your app client</li>
<li>Under <strong>Hosted UI</strong> settings:
<ul>
<li>Ensure your app client has appropriate <strong>Callback URLs</strong> configured</li>
<li>Under <strong>Identity providers</strong>, enable <code>OpenID Connect (entra)</code></li>
<li>Verify <strong>OAuth 2.0 grant types</strong> includes <code>Authorization code grant</code></li>
<li>Set <strong>OpenID Connect scopes</strong> to include <code>openid</code>, <code>profile</code>, <code>email</code></li>
</ul>
</li>
<li>Click <strong>Save changes</strong></li>
</ol>
<p><img src="2025-08-11-08-37-07.png" alt=""></p>
<p><img src="2025-08-11-08-37-22.png" alt=""></p>
<h3 id="10-test-the-integration"><strong>10. Test the Integration</strong></h3>
<p>Test your integration by accessing:</p>
<pre tabindex="0"><code>https://&lt;your-cognito-domain&gt;/login?response_type=code&amp;client_id=&lt;cognito-app-client-id&gt;&amp;redirect_uri=&lt;your-redirect-uri&gt;
</code></pre><h2 id="see-also">See also:</h2>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-overview/">Entra ID and Cognito Itegration - Guide</a></p>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-step1/">Entra ID and Cognito Itegration - Step1</a></p>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-step2/">Entra ID and Cognito Itegration - Step2</a></p>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-step3/">Entra ID and Cognito Itegration - Step3</a></p>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-step4/">Entra ID and Cognito Itegration - Step4</a></p>
<p><a href="http://localhost:1313/blog/entraid-cognito-itegration-step5/">Entra ID and Cognito Itegration - Step5</a></p>
</div>
      </div>
    </div>
  </div>
</section>


<footer class="footer footer-dark">
  <div class="container">
    <div class="columns">
      <div class="column">
        <div class="footer-logo">
          <img src="/images/logos/IntelliumX-v15.png">
        </div>
      </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Product</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="/">
                  Discover features
                </a>
              </li>
              <li>
                <a href="/">
                  Why choose our product?
                </a>
              </li>
              <li>
                <a href="/">
                  Compare features
                </a>
              </li>
              <li>
                <a href="/">
                  Our roadmap
                </a>
              </li>
              <li>
                <a href="/agb">
                  AGB
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Docs</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="/">
                  Get started
                </a>
              </li>
              <li>
                <a href="/">
                  User guides
                </a>
              </li>
              <li>
                <a href="/">
                  Admin guide
                </a>
              </li>
              <li>
                <a href="/">
                  Developers
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="column">
          <div class="footer-column">
            <div class="footer-header">
                <h3>Blog</h3>
            </div>
            <ul class="link-list">
              <li>
                <a href="/blog/">
                  All Posts
                </a>
              </li>
              <li>
                <a href="/about/">
                  About
                </a>
              </li>
            </ul>
          </div>
        </div>
      <div class="column">
        <div class="footer-column">
          <div class="footer-header">
            <h3>Follow Us</h3>
            <nav class="level is-mobile">
              <div class="level-left">
                <a class="level-item" href="https://www.linkedin.com/in/nobuhiro-tokushige/">
                  <span class="icon"><i class="fa fa-linkedin"></i></span>
                </a>
                <a class="level-item" href="https://github.com/nobuhiro-tokushige">
                  <span class="icon"><i class="fa fa-github"></i></span>
                </a>
              </div>
            </nav>
            <a href="https://bulma.io" target="_blank">
              <img src="/images/logos/made-with-bulma.png" alt="Made with Bulma" width="128" height="24">
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>



    
    <div id="backtotop"><a href="#"></a></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script src="/js/fresh.js"></script>
<script src="/js/jquery.panelslider.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script src="/js/active-menu.js"></script>

  </body>
</html>
